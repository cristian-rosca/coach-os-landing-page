.typography {
  color: var(--color-foreground);
  font-size: var(--text-xl);
  line-height: var(--text-xl--line-height);

  --shiki-color-text: var(--color-foreground);
  --shiki-color-background: var(--color-background);
  --shiki-token-constant: #a1a1aa;
  --shiki-token-string: #71717a;
  --shiki-token-comment: #52525b;
  --shiki-token-keyword: #71717a;
  --shiki-token-parameter: #71717a;
  --shiki-token-function: #a1a1aa;
  --shiki-token-string-expression: #a1a1aa;
  --shiki-token-punctuation: #71717a;

  :where(.typography > *) {
    margin-top: --spacing(6);
    margin-bottom: --spacing(6);
  }

  /* Headings */
  :where(h1) {
    font-weight: var(--font-weight-bold);
    font-family: var(--font-display);
    font-variation-settings: var(--font-display--font-variation-settings);
    font-size: var(--text-4xl);
    line-height: var(--text-4xl--line-height);
    margin-top: --spacing(20);
  }

  :where(h2) {
    font-weight: var(--font-weight-semibold);
    font-family: var(--font-display);
    font-variation-settings: var(--font-display--font-variation-settings);
    font-size: var(--text-2xl);
    line-height: var(--text-2xl--line-height);
    margin-top: --spacing(16);
  }

  :where(h3) {
    font-weight: var(--font-weight-semibold);
    font-family: var(--font-display);
    font-variation-settings: var(--font-display--font-variation-settings);
    font-size: var(--text-xl);
    line-height: var(--text-xl--line-height);
    margin-top: --spacing(10);
  }

  :where(h4) {
    font-weight: var(--font-weight-medium);
    font-family: var(--font-display);
    font-variation-settings: var(--font-display--font-variation-settings);
    font-size: var(--text-lg);
    line-height: var(--text-lg--line-height);
    margin-top: --spacing(8);
  }

  :where(h1 + h2),
  :where(h2 + h3),
  :where(h3 + h4) {
    margin-top: 0;
  }

  /* Paragraphs */
  :where(p) {
    font-size: var(--text-base);
    line-height: var(--text-base--line-height);
  }

  :where(.lead) {
    font-size: var(--text-lg);
    line-height: var(--text-lg--line-height);
    color: var(--color-muted-foreground);
  }

  /* Lists */
  :where(ul, ol) {
    padding-left: 1.5rem;
  }

  :where(ul) {
    list-style-type: disc;
  }

  :where(ol) {
    list-style-type: decimal;
  }

  :where(li) {
    padding-left: --spacing(3);
    margin-top: --spacing(6);
  }

  :where(li)::marker {
    color: var(--color-muted-foreground);
  }

  :where(li > *),
  :where(li li) {
    margin-top: --spacing(4);
  }

  :where(ol > li)::marker {
    font-size: var(--text-base);
    font-weight: var(--font-weight-semibold);
  }

  /* Tables */
  :where(table) {
    width: 100%;
    text-align: left;
    font-size: var(--text-base);
    line-height: var(--text-base--line-height);
    border-collapse: collapse;
  }

  :where(th) {
    font-weight: var(--font-weight-semibold);
  }

  :where(thead th) {
    padding-bottom: --spacing(6);
    border-bottom: 1px solid var(--color-border);
  }

  :where(td) {
    vertical-align: top;
    padding-top: --spacing(6);
    padding-bottom: --spacing(6);
    border-bottom: 1px solid color-mix(in srgb, var(--color-border) 50%, transparent);
  }

  :where(:is(th, td):not(:last-child)) {
    padding-right: --spacing(6);
  }

  /* Code blocks */
  :where(pre) {
    display: flex;
    background-color: var(--color-muted);
    border-radius: var(--radius-xl);
    overflow-x: auto;
    margin-top: --spacing(10);
    margin-bottom: --spacing(10);
    margin-left: calc(-1 * (--spacing(6)));
    margin-right: calc(-1 * (--spacing(6)));
    border: 1px solid var(--color-border);

    @media (width >= theme(--breakpoint-sm)) {
      margin-left: auto;
      margin-right: auto;
      border-radius: var(--radius-2xl);
    }
  }

  :where(pre code) {
    flex: none;
    padding: theme(padding.4) theme(padding.4);
    font-size: var(--text-sm);
    line-height: theme(lineHeight.6);
    color: var(--color-foreground);
    font-family: var(--font-mono);

    @media (width >= theme(--breakpoint-sm)) {
      padding: --spacing(6) --spacing(8);
      font-size: var(--text-base);
    }
  }

  /* <hr> */
  :where(hr) {
    border-color: var(--color-border);
    margin-top: --spacing(24);
    margin-bottom: --spacing(24);
  }

  /* Inline text */
  :where(a) {
    text-decoration: underline;
    text-decoration-thickness: 1px;
    text-underline-offset: 0.15em;
    text-decoration-skip-ink: none;
    font-weight: var(--font-weight-medium);
    color: var(--color-primary);
    transition: color 0.2s ease;
  }

  :where(a:hover) {
    color: var(--color-muted-foreground);
  }

  :where(strong) {
    font-weight: var(--font-weight-semibold);
  }

  :where(em) {
    font-style: italic;
  }

  :where(code:not(pre code)) {
    font-size: calc(14 / 16 * 1em);
    font-weight: var(--font-weight-medium);
    background-color: var(--color-muted);
    padding: 0.125rem 0.25rem;
    border-radius: 0.25rem;
    font-family: var(--font-mono);
    border: 1px solid var(--color-border);
  }

  :where(h1 code, h2 code, h3 code, h4 code) {
    font-weight: var(--font-weight-bold);
  }

  /* Blockquotes */
  :where(blockquote) {
    border-left: 4px solid var(--color-border);
    padding-left: --spacing(6);
    margin-left: 0;
    margin-right: 0;
    font-style: italic;
    color: var(--color-muted-foreground);
  }

  /* Figures */
  :where(figure) {
    margin-top: --spacing(32);
    margin-bottom: --spacing(32);
  }

  :where(figcaption) {
    margin-top: --spacing(4);
    font-size: var(--text-sm);
    color: var(--color-muted-foreground);
    text-align: center;
  }

  /* Images */
  :where(img) {
    max-width: 100%;
    height: auto;
    border-radius: var(--radius-lg);
  }

  /* Spacing overrides */
  :where(.typography:first-child > :first-child),
  :where(li > :first-child) {
    margin-top: 0 !important;
  }

  :where(.typography:last-child > :last-child),
  :where(li > :last-child) {
    margin-bottom: 0 !important;
  }
}

/* Utility classes for quick typography */
.text-display {
  font-family: var(--font-display);
  font-variation-settings: var(--font-display--font-variation-settings);
  font-weight: var(--font-weight-bold);
}

.text-display-lg {
  font-family: var(--font-display);
  font-variation-settings: var(--font-display--font-variation-settings);
  font-weight: var(--font-weight-bold);
  font-size: var(--text-5xl);
  line-height: var(--text-5xl--line-height);
}

.text-display-xl {
  font-family: var(--font-display);
  font-variation-settings: var(--font-display--font-variation-settings);
  font-weight: var(--font-weight-bold);
  font-size: var(--text-6xl);
  line-height: var(--text-6xl--line-height);
}

.text-display-2xl {
  font-family: var(--font-display);
  font-variation-settings: var(--font-display--font-variation-settings);
  font-weight: var(--font-weight-bold);
  font-size: var(--text-7xl);
  line-height: var(--text-7xl--line-height);
}